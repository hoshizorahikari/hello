<ul class="blog_box">
    {% for blog in blogs %}
        <li class="blog">
            <div class="blog-thumbnail">
                {# 文章作者头像缩略图, 带链接 #}
                <a href="{{ url_for('.user', username=blog.author.username) }}">
                    <img class="img-rounded auther-thumbnail" src="{{ blog.author.image }}">
                </a>
            </div>
            <div class="blog-content">
                <div class="blog-date">
                    {{ moment(blog.timestamp).fromNow() }}
                </div>
                <div class="blog-author">
                    <a href="{{ url_for('.user', username=blog.author.username) }}">
                        {{ blog.author.username }}
                    </a>
                </div>
                <div class="blog-body">
                    {% if blog.body_html %}
                        {# 使用safe过滤器,不转义HTML标签 #}
                        {{ blog.body_html | safe }}
                    {% else %}
                        {{ blog.body }}
                    {% endif %}
                </div>

                <div class="blog-footer">{# 文章的底部 #}
                    {% if current_user == blog.author %}
                        <a href="{{ url_for('.edit',id=blog.id) }}">
                            <span class="label label-primary">编辑</span>
                        </a>
                    {%elif current_user.is_admin() %}
                        <a href="{{ url_for('.edit',id=blog.id) }}">
                            <span class="label label-danger">编辑 [ADMIN]</span>
                        </a>
                    {% endif %}
                    <a href="{{ url_for('.blog',id=blog.id) }}">
                        <span class="label label-default">链接</span>
                    </a>

                    <a href="{{ url_for('.blog', id=blog.id) }}#comments">
                        <span class="label label-primary">评论({{ blog.comments.count() }})</span>
                    </a>


                </div>


            </div>
        </li>
    {% endfor %}
</ul>